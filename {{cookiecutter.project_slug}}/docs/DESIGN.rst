系统设计
=================

背景
------

服务于xxx。提高其工作效率，让其工作更多集中在项目的监控管理上，而不是枯燥的数据统计、处理上。

后期逐步与 OA(流程数据) / U8（财务数据）集成，进一步提高自动化水平。

最终实现xxx，让xxx

系统用户
-------------

.. glossary::

    超级管理员
        超级管理员拥有所有权限。

        超级管理员负责创建用户、分配权限等系统级初始化工作

    xxx部人员
        系统的主要用户。也是系统的关键用户。系统的改进需求由此用户确定。同时他们也是系统的主要使用者，负责系统主要信息的录入、维护。

数据结构
----------

关键名词解释
~~~~~~~~~~~~~~

.. glossary::

    部门
        所有的表，都带有部门信息。目的是为了，按部门来做数据权限的隔离。比如 `事业一部` 的项目经理未来如果使用系统，将只能看到本部门的
        数据，就通过这个字段来实现。考虑到权限控制越细越复杂，同时也考虑到公司的实际情况，综合平衡，因此设计上决定只做部门级别的数据权限隔
        离。在相当一段时期内，应该都够用了。


数据模型 `ER` 图
~~~~~~~~~~~~~~~~

* 核心模型示意图

.. graphviz::

    digraph concept {
        edge [labeldistance=1.7, fontsize=12];
        "部门" -> "项目" [headlabel="n",taillabel="1"];
        "项目" -> {"合同", "项目预算", "项目档案", "项目里程碑"} [headlabel="n",taillabel="1"];
        "合同" -> {"合同执行", "收入确认"} [headlabel="n",taillabel="1"];
    }

* `ER` 模型

.. image:: img//model-{{cookiecutter.project_slug}}.png

.. 在 docs 目录下运行 make png 会生成 ER 模型图
